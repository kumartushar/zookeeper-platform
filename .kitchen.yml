---
# <% load "#{File.dirname(__FILE__)}/test/kitchen_docker.rb" %>

driver:
  name: docker
  use_sudo: false

provisioner:
  name: chef_zero

platforms:
  - name: centos-7
    driver_config:
      # The two following lines are needed by systemd to access cgroups
      privileged: true
      volume: /sys/fs/cgroup:/sys/fs/cgroup:ro
      run_command: /usr/sbin/init # Start systemd as root process
      require_chef_omnibus: false
      provision_command:
        - curl -L https://www.getchef.com/chef/install.sh | bash
        - yum install -y hostname

suites:
  - name: zookeeper-kitchen-01
    driver:
      hostname: zookeeper-kitchen-01.kitchen
      instance_name: zookeeper-kitchen-01
    run_list:
      - role[zookeeper-kitchen]
  - name: zookeeper-kitchen-02
    driver:
      hostname: zookeeper-kitchen-02.kitchen
      instance_name: zookeeper-kitchen-02
    run_list:
      - role[zookeeper-kitchen]
  - name: zookeeper-kitchen-03
    driver:
      hostname: zookeeper-kitchen-03.kitchen
      instance_name: zookeeper-kitchen-03
    run_list:
      - role[zookeeper-kitchen]
